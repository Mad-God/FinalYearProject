{% extends "base.html" %}{% load tailwind_filters %} {% block content %}
{% load static %}


<style>
  body {margin:0;font-family:Arial}
  
  .topnav {
    overflow: hidden;
    background-color: #333;
  }
  
  .topnav a {
    float: left;
    display: block;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
  }
  
  .active {
    background-color: #04AA6D;
    color: white;
  }
  
  .topnav .icon {
    display: none;
  }
  
  .dropdown {
    float: left;
    overflow: hidden;
  }
  
  .dropdown .dropbtn {
    font-size: 17px;    
    border: none;
    outline: none;
    color: white;
    padding: 14px 16px;
    background-color: inherit;
    font-family: inherit;
    margin: 0;
  }
  
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }
  
  .dropdown-content a {
    float: none;
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
  }
  
  .topnav a:hover, .dropdown:hover .dropbtn {
    background-color: #555;
    color: white;
  }
  
  .dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }
  
  .dropdown:hover .dropdown-content {
    display: block;
  }
  
  @media screen and (max-width: 600px) {
    .topnav a:not(:first-child), .dropdown .dropbtn {
      display: none;
    }
    .topnav a.icon {
      float: right;
      display: block;
    }
  }
  
  @media screen and (max-width: 600px) {
    .topnav.responsive {position: relative;}
    .topnav.responsive .icon {
      position: absolute;
      right: 0;
      top: 0;
    }
    .topnav.responsive a {
      float: none;
      display: block;
      text-align: left;
    }
    .topnav.responsive .dropdown {float: none;}
    .topnav.responsive .dropdown-content {position: relative;}
    .topnav.responsive .dropdown .dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }
</style>
<section class="text-gray-600 body-font">
  {% include "shop/shop/shop_detail_modal.html" %}
  <h1 class = "text-5xl font-bold justify-center text-black-300 uppercase text-underline bg-gray-100 px-3 py-3 hover:shadow-lg" style="border-radius:0 0 40px 40px; width:100%; font-family: 'Nunito', sans-serif;padding-left:40%; transition:0.5s"
  type="button" data-modal-toggle="defaultModal"
    >
    {{shop.name}}
    <div class ="justify-center">
    </div>
  </h1>
  {% comment %} {% if request.user == shop.user %}
  {% include "sidebar.html" %}
    <a href = "{% url 'shop:shop-update' shop.id %}"> Update Shop Details </a>
    {% else %}
  {% endif %} {% endcomment %}
    
  
      {% comment %} The search  bar    {% endcomment %}

        <br>
        <div class = "mx-auto" style = "width:100%;">
          <form method = "GET">
            <div class="pt-2 relative mx-auto text-gray-600">
            <input class="border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none form-control relative flex-auto min-w-0 block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"
              type="text" name="q" placeholder="Search Products ">
            <button type="submit" class="absolute right-0 top-0 mt-5 mr-4">
              <svg class="text-gray-600 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve"
                width="512px" height="512px">
                <path
                  d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
              </svg>
            </button>
          </div>
            
          </form>
        </div> 
      {% comment %} search bar end {% endcomment %}


  <div class="container px-3 py-20 mx-auto">
  
    {% comment %} the carousel {% endcomment %}
    <!-- component -->
    <!-- This is an example component -->
    <div class="max-w-8xl mx-auto" id = "carousel-component">
        <style>
          .gfg {
            {% comment %} margin: 3l%; {% endcomment %}
            position: relative;
            opacity:70%;
          }
          
          .first-txt {
            position: absolute;
            top: 50px;
            left: 5%;
            {% comment %} align:centerAlign: {% endcomment %}
            font: bold 55px black Arial , sans-serif ;
            color: #666262
          }

          .second-txt {
            position: absolute;
            bottom: 10px;
            right: 12%;
            height:35px;
            width:35px;
            {% comment %} align-items:center: {% endcomment %}
            {% comment %} justify-content:center {% endcomment %}
            {% comment %} font: bold 55px black Arial , sans-serif ; {% endcomment %}
            color: #666262
          }
        </style>

        <div id="default-carousel" class="relative" data-carousel="static">
          <!-- Carousel wrapper -->
          <div
            class="overflow-hidden relative h-56 rounded-lg sm:h-64 xl:h-80 2xl:h-96"
          >
            {% for sld in slides %}
            {% comment %} <div class="hidden duration-700 ease-in-out" data-carousel-item>
              <img
                src="/{{sld.img}}"
                class="block absolute top-1/2 left-1/2 w-full -translate-x-1/2 -translate-y-1/2 gfg"
                alt="..."
              />
              <h1 class="first-txt">{{sld.text}}</h1>
            </div> {% endcomment %}
            <div class="hidden duration-700 ease-in-out" data-carousel-item>
              <img
                src="/{{sld.img}}"
                class="block absolute top-1/2 left-1/2 w-full -translate-x-1/2 -translate-y-1/2 gfg"
                alt="..."
              />
              <div class = "first-txt" style="background-color:Black; opacity:80%; width:100%;">
                <h1 style="font-size:6rem; margin-top:0; margin-left:30%; vertical-align:middle">{{sld.text}}</h1>
              </div>
              {% if request.user == shop.user %}
              
                <div class = "second-txt hover:bg-white " style="background-color:Yellow; opacity:60%; border-radius:50%; z-index:10;padding:5px">
                  <a href="{% url 'shop:slide-create' pk=request.user.id %}" style="opacity:100%">
                    <img  src = "{% static 'icons8-pencil-drawing-24.png' %}"/>    
                  </a>
                </div>
              {% endif %}
            </div>
            {% endfor %}
            
          </div>
          <!-- Slider indicators -->
          <div
            class="flex absolute bottom-5 left-1/2 z-30 space-x-3 -translate-x-1/2"
          >
            
            {% for sld in slides %}
            <button
              type="button"
              class="w-3 h-3 rounded-full"
              aria-current="false"
              aria-label="Slide {{sld.id}}"
              data-carousel-slide-to="{{sld.id}}"
            ></button>
            {% endfor %}
          </div>
          <!-- Slider controls -->
          <button
            type="button"
            class="flex absolute top-0 left-0 z-30 justify-center items-center px-4 h-full cursor-pointer group focus:outline-none"
            data-carousel-prev
          >
            <span
              class="inline-flex justify-center items-center w-8 h-8 rounded-full sm:w-10 sm:h-10 bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none"
            >
              <svg
                class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"
                ></path>
              </svg>
              <span class="hidden">Previous</span>
            </span>
          </button>
          <button id="carousel-next-slide-btn"
            type="button"
            class="flex absolute top-0 right-0 z-30 justify-center items-center px-4 h-full cursor-pointer group focus:outline-none"
            data-carousel-next
          >
            <span
              class="inline-flex justify-center items-center w-8 h-8 rounded-full sm:w-10 sm:h-10 bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none"
            >
              <svg
                class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                ></path>
              </svg>
              <span class="hidden">Next</span>
            </span>
          </button>
        </div>

        <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>
      </div>

      {% comment %} manage slides link {% endcomment %}
      {% comment %} {% if request.user == shop.user %}
        <div>
          <a href="{% url 'shop:slide-create' pk=request.user.id %}">Manage slides</a>
        </div>
      {% endif %}  {% endcomment %}

  {% comment %} end of carousel {% endcomment %}


  {% comment %} The Cartegory bar {% endcomment %}

  <button id="dropdownButton" data-dropdown-toggle="dropdown" 
  class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" 
  type="button">
  {{current_category}}
  <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
  </svg></button>

  <!-- Dropdown menu -->
  <div id="dropdown" class="hidden z-10 w-44 text-base list-none bg-white rounded divide-y divide-gray-100 shadow dark:bg-gray-700">
      <ul class="py-1" aria-labelledby="dropdownButton">
        
        <li>
          <a href="{% url 'shop:home' pk=shop.id cat=0 %}" class="block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">All Items</a>
        </li>
        {% for cat in categories %}
          {% comment %} {% if cat.id == selected_cat %}
            <option selected value="{{cat}}">{{cat}}</option> {% endcomment %}
            <li>
              <a href="{% url 'shop:home' pk=shop.id cat=cat.id %}" class="block py-2 px-4 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                {{cat}}
              </a>
            </li>
          {% comment %} {% else %}
            <option value="{{cat}}">{{cat}}</option>
          {% endif %} {% endcomment %}
          {% endfor %}
      </ul>
  </div>


  <!-- New Orders -->
  {% comment %} {% if request.user == shop.user %}
    <div class="flex space-x-2 justify-center">
      <a href = "{% url 'shop:order-list' shop.pk %}">
      <button type="button" class="inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-600 hover:shadow-lg focus:bg-blue-600 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out flex items-center">
        Your Orders
        {% if orders > 0 %}
        <span class="inline-block py-1 px-1.5 leading-none text-center whitespace-nowrap align-baseline font-bold bg-red-600 text-white rounded ml-2">{{orders}} incomplete Order</span>
        {% else %}
        {% endif %}
        
      </button>
    </a>
    </div>    
  {% else %}
  {% endif %} {% endcomment %}




    {% comment %} {% if request.user == shop.user %}
      <a href="{% url 'shop:categories' shop.id %}">
        Manage Categories
      </a> {% endcomment %}

        {% comment %} to check sorting {% endcomment %}
      {% comment %} <a href="{% url 'shop:stock-update' shop.id %}">
        <button id = "border-change" onclick="myFunction()"
            class="ml-4 text-gray-700 bg-gray-100 border-top-5 py-2 px-6 focus:outline-none hover:bg-gray-200 rounded text-lg"
          >
          Upload stock file
        </button>
      </a>
      <a href="{% url 'shop:suppliers' shop.id %}">
        Manage Suppliers
      </a>
    {% else %}
    {% endif %} {% endcomment %}
  </div>

        

  {% comment %} the actual products {% endcomment %}
  <div id = "product-cards" class="flex flex-wrap -m-4">
    {% for prod in object_list  %}
    {% if 1 %}
    
    <div class="lg:w-1/4 md:w-1/2 p-4 w-full">
      {% if request.user.shop == shop %}
      <a
        class="block relative h-48 rounded overflow-hidden"
        href="{% url 'shop:product_update' prod.id %}"
      >
        {% if prod.img %}
        
          <img
            alt="ecommerce"
            class="object-cover object-center w-full h-full block"
            src="/{{prod.img}}"
          />
        {% else %}
        <img
          src="/static/pexels-_getinspoco_-bibhash-banerjee-1047168.jpg"
          alt="ecommerce"
          class="object-cover object-center w-full h-full block"
        />
        {% endif %}
      </a>
      {% else %}
      <a
        class="block relative h-48 rounded overflow-hidden"
       
      >
      {% if prod.img %}
        
          <img
            alt="ecommerce"
            class="object-cover object-center w-full h-full block"
            src="/{{prod.img}}"
          />
        {% else %}
        <img
          src="/static/pexels-_getinspoco_-bibhash-banerjee-1047168.jpg"
          alt="ecommerce"
          class="object-cover object-center w-full h-full block"
        />
        {% endif %}
      </a>
      {% endif %}
      
      <div class="mt-4">
        <h3 class="text-gray-500 text-xs tracking-widest title-font mb-1">
          {% if prod.stock > 0 %}
          <p>
            In stock
            <span
              class="inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-green-100 bg-green-600 rounded-full"
              >{{prod.stock}}</span
            >
          </p>
          {% else %}
          <p>
            <span
              class="inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full"
              >Out of stock</span
            >
          </p>
          {% endif %}
        </h3>
        <h2  class="text-gray-900 title-font text-lg font-medium prod_name">
          {{prod.name}}
        </h2>
        <p class="mt-1">Rs. {{prod.price}}</p>

        <br>
        {% comment %} the product buttons {% endcomment %}
        {% if user.shop == prod.shop %}
          <button
            class="ml-right text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"
            
          >
          <a href = "{% url "shop:product_update" prod.id %}">
            Update 
          </a>
          </button>
          <button
            class="ml-right text-white bg-red-600 border-y-200 py-2 px-6 focus:outline-none hover:bg-red-700 rounded"
            style="float: right"
          >
            <a href="{% url 'shop:product_delete' prod.pk%}">
              <p class="mt-1">Delete</p>
            </a>
          </button>
        {% else %} 
          {% comment %} to see if product is in stock {% endcomment %}
          {% if  prod.stock > 0 %}
          
            {% if request.user.cart.items.all %}
            {% comment %} {% for it in request.user.cart.items.all %} {% endcomment %}
            {% if prod in prods %}
            {% for it in cart_items %}
                {% if it.product == prod %}
                <button
                class="ml-right text-white bg-indigo-500 justify border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"
                >
                <a href = "{% url "shop:item-update" it.id %}">
                  <span class = "cart_quan"> Update Quantity
                      {{it.quantity}}</span>
                </a>
                </button>
              
                {% else %}
                {% endif %}
            {% endfor %}
            
              {% else %}
              <button
                class="ml-right text-white bg-indigo-500 justify border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"
              >
              <a href = "{% url "shop:item-create" prod.id %}">
                <svg class="w-5 h-5 fill-current justify-right" viewBox="0 0 20 20"><path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
                Add to cart
              </a>
              </button>
              {% endif %}
            {% comment %} {% endfor %}  {% endcomment %}

            {% else %}
            <button
              class="ml-right text-white bg-indigo-500 justify border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"
            >
            <a href = "{% url "shop:item-create" prod.id %}">
              <svg class="w-5 h-5 fill-current justify-right" viewBox="0 0 20 20"><path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
              Add to cart
            </a>
            </button>          
            {% endif %}
            <button
              class="justify-center  ml-right text-white bg-red-600 border-y-200 py-2 px-6 focus:outline-none hover:bg-red-700 rounded"
              style="float: right"
            >
              <a href="{% url 'shop:product_compare' pk=prod.id %}">
                <span class="mt-1">
                  Compare
                </span>
              </a>
            </button>
          {% else %}
            <span>Coming Soon ...</span>
          {% endif %}
        {% endif %}
        
      </div>
    </div>
    
    {% else %}
    {% endif %}
    {% endfor %}
  </div>
  <hr class="p-2" />


  {% comment %} Pagination {% endcomment %}

  {% if object_list.has_previous %}
    <a href="?page=1"> &laquo First</a>

    <a href="?page={{ object_list.previous_page_number }}">Previous</a>
    
  {% endif %}

  Page: {{object_list.number}} of {{object_list.paginator.num_pages}}


  {% if object_list.has_next %}
    <a href="?page={{ object_list.next_page_number }}">Next</a>

    <a href="?page={{ object_list.paginator.num_pages }}">Last &raquo</a>

  {% endif %}
  

</section>

  
<script type="text/javascript">
  console.log("working")
  //var btn_carousel = document.getElementById('carousel-next-slide-btn')
  var carousel_ele = document.getElementById("carousel-component")
  console.log(carousel_ele)
  // console.log(btn_carousel )
  btn_carousel.click()
  setTimeout(btn_carousel.click(),1000);
</script>

{% endblock %}